{"ast":null,"code":"var _jsxFileName = \"D:\\\\VSCode\\\\learn react\\\\learn\\\\src\\\\components\\\\Logout.jsx\";\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom'; // sử dụng useNavigate từ react-router-dom để điều hướng\n\nconst Logout = () => {\n  const navigate = useNavigate(); // Tạo đối tượng navigate để chuyển hướng\n\n  const handleLogout = async () => {\n    try {\n      const token = localStorage.getItem('authToken'); // Lấy authToken từ localStorage\n      if (!token) {\n        console.error('No authToken found');\n        return;\n      }\n\n      // Gửi yêu cầu POST đến /auth/logout\n      const response = await fetch('http://localhost:8080/mycoffee/auth/logout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          token\n        }) // Gửi authToken trong body\n      });\n      if (!response.ok) {\n        throw new Error('Logout failed');\n      }\n\n      // Xóa authToken sau khi logout\n      localStorage.removeItem('authToken');\n\n      // Chuyển hướng về trang chủ bằng cách sử dụng navigate\n      navigate('/'); // Thay thế window.location.href bằng navigate('/')\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-fixed top-0 end-0 m-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary shadow\",\n    type: \"button\",\n    onClick: handleLogout // Gọi hàm handleLogout khi bấm vào button\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, \"Log out\")));\n};\nexport default Logout;","map":{"version":3,"names":["React","useNavigate","Logout","navigate","handleLogout","token","localStorage","getItem","console","error","response","fetch","method","headers","body","JSON","stringify","ok","Error","removeItem","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick"],"sources":["D:/VSCode/learn react/learn/src/components/Logout.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useNavigate } from 'react-router-dom'; // sử dụng useNavigate từ react-router-dom để điều hướng\r\n\r\nconst Logout = () => {\r\n  const navigate = useNavigate();  // Tạo đối tượng navigate để chuyển hướng\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken'); // Lấy authToken từ localStorage\r\n      if (!token) {\r\n        console.error('No authToken found');\r\n        return;\r\n      }\r\n\r\n      // Gửi yêu cầu POST đến /auth/logout\r\n      const response = await fetch('http://localhost:8080/mycoffee/auth/logout', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ token }), // Gửi authToken trong body\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Logout failed');\r\n      }\r\n\r\n      // Xóa authToken sau khi logout\r\n      localStorage.removeItem('authToken');\r\n\r\n      // Chuyển hướng về trang chủ bằng cách sử dụng navigate\r\n      navigate('/');  // Thay thế window.location.href bằng navigate('/')\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      {/* Button fixed ở góc trên bên phải */}\r\n      <div className=\"position-fixed top-0 end-0 m-3\">\r\n        <button\r\n          className=\"btn btn-primary shadow\"\r\n          type=\"button\"\r\n          onClick={handleLogout}  // Gọi hàm handleLogout khi bấm vào button\r\n        >\r\n          Log out\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Logout;\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB,CAAC,CAAC;;AAEhD,MAAMC,MAAM,GAAGA,CAAA,KAAM;EACnB,MAAMC,QAAQ,GAAGF,WAAW,CAAC,CAAC,CAAC,CAAE;;EAEjC,MAAMG,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;MACjD,IAAI,CAACF,KAAK,EAAE;QACVG,OAAO,CAACC,KAAK,CAAC,oBAAoB,CAAC;QACnC;MACF;;MAEA;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,4CAA4C,EAAE;QACzEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEX;QAAM,CAAC,CAAC,CAAE;MACnC,CAAC,CAAC;MAEF,IAAI,CAACK,QAAQ,CAACO,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;MAClC;;MAEA;MACAZ,YAAY,CAACa,UAAU,CAAC,WAAW,CAAC;;MAEpC;MACAhB,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAE;IAClB,CAAC,CAAC,OAAOM,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACvC;EACF,CAAC;EAED,oBACET,KAAA,CAAAoB,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE9B3B,KAAA,CAAAoB,aAAA;IAAKC,SAAS,EAAC,gCAAgC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7C3B,KAAA,CAAAoB,aAAA;IACEC,SAAS,EAAC,wBAAwB;IAClCO,IAAI,EAAC,QAAQ;IACbC,OAAO,EAAEzB,YAAa,CAAE;IAAA;IAAAkB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACzB,SAEO,CACL,CACF,CAAC;AAEV,CAAC;AAED,eAAezB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module"}