{"ast":null,"code":"var _jsxFileName = \"D:\\\\VSCode\\\\learn react\\\\learn\\\\src\\\\components\\\\Search.jsx\";\nimport React, { useState, useEffect } from \"react\";\nconst Search = ({\n  setSearchResults\n}) => {\n  const [keyword, setKeyword] = useState(\"\");\n  const [debouncedKeyword, setDebouncedKeyword] = useState(\"\");\n\n  // Debounce keyword (trì hoãn tìm kiếm khi người dùng gõ liên tục)\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedKeyword(keyword);\n    }, 300); // 300ms debounce\n\n    return () => clearTimeout(timer); // Xóa timer khi keyword thay đổi\n  }, [keyword]);\n\n  // Gọi API khi debouncedKeyword thay đổi\n  useEffect(() => {\n    const handleSearch = async () => {\n      if (debouncedKeyword.trim() === \"\") {\n        setSearchResults([]); // Nếu ô tìm kiếm trống, trả về kết quả rỗng\n        return;\n      }\n      try {\n        const response = await fetch(`http://localhost:8080/mycoffee/product/search?keyword=${debouncedKeyword}`, {\n          method: \"GET\"\n        });\n        if (!response.ok) throw new Error(\"Search API failed\");\n        const data = await response.json();\n        const results = data.result || [];\n        setSearchResults(results.map(item => ({\n          id: item.id,\n          name: item.name,\n          price: item.price,\n          image_url: item.image_url\n        })));\n      } catch (error) {\n        console.error(\"Error during search:\", error);\n      }\n    };\n    handleSearch();\n  }, [debouncedKeyword, setSearchResults]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-box d-flex align-items-center border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Search...\",\n    className: \"input\",\n    type: \"text\",\n    value: keyword,\n    onChange: e => setKeyword(e.target.value) // Cập nhật keyword mỗi khi gõ\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"style\", {\n    jsx: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, `\n        .search-box {\n          height: 45px;\n          border-radius: 5px;\n          background-color: #333333;\n        }\n\n        .input {\n          color: #cccccc;\n          background-color: #333333;\n          border: none;\n          outline: none;\n          padding: 5px;\n        }\n\n        .input::placeholder {\n          color: #808080;\n        }\n      `));\n};\nexport default Search;","map":{"version":3,"names":["React","useState","useEffect","Search","setSearchResults","keyword","setKeyword","debouncedKeyword","setDebouncedKeyword","timer","setTimeout","clearTimeout","handleSearch","trim","response","fetch","method","ok","Error","data","json","results","result","map","item","id","name","price","image_url","error","console","createElement","Fragment","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","type","value","onChange","e","target","jsx"],"sources":["D:/VSCode/learn react/learn/src/components/Search.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst Search = ({ setSearchResults }) => {\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [debouncedKeyword, setDebouncedKeyword] = useState(\"\");\r\n\r\n  // Debounce keyword (trì hoãn tìm kiếm khi người dùng gõ liên tục)\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedKeyword(keyword);\r\n    }, 300); // 300ms debounce\r\n\r\n    return () => clearTimeout(timer); // Xóa timer khi keyword thay đổi\r\n  }, [keyword]);\r\n\r\n  // Gọi API khi debouncedKeyword thay đổi\r\n  useEffect(() => {\r\n    const handleSearch = async () => {\r\n      if (debouncedKeyword.trim() === \"\") {\r\n        setSearchResults([]); // Nếu ô tìm kiếm trống, trả về kết quả rỗng\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch(\r\n          `http://localhost:8080/mycoffee/product/search?keyword=${debouncedKeyword}`,\r\n          { method: \"GET\" }\r\n        );\r\n\r\n        if (!response.ok) throw new Error(\"Search API failed\");\r\n\r\n        const data = await response.json();\r\n        const results = data.result || [];\r\n        setSearchResults(\r\n          results.map((item) => ({\r\n            id: item.id,\r\n            name: item.name,\r\n            price: item.price,\r\n            image_url: item.image_url,\r\n          }))\r\n        );\r\n      } catch (error) {\r\n        console.error(\"Error during search:\", error);\r\n      }\r\n    };\r\n\r\n    handleSearch();\r\n  }, [debouncedKeyword, setSearchResults]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"d-flex align-items-center mx-auto\">\r\n        <div className=\"search-box d-flex align-items-center border\">\r\n          <input\r\n            placeholder=\"Search...\"\r\n            className=\"input\"\r\n            type=\"text\"\r\n            value={keyword}\r\n            onChange={(e) => setKeyword(e.target.value)} // Cập nhật keyword mỗi khi gõ\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        .search-box {\r\n          height: 45px;\r\n          border-radius: 5px;\r\n          background-color: #333333;\r\n        }\r\n\r\n        .input {\r\n          color: #cccccc;\r\n          background-color: #333333;\r\n          border: none;\r\n          outline: none;\r\n          padding: 5px;\r\n        }\r\n\r\n        .input::placeholder {\r\n          color: #808080;\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}